# 🎯 Enhance Search Buddy 需求总结与规范 (升级版)\n\n## 📌 项目核心定位\n\n**项目名称**: Enhance Search Buddy  \n**项目类型**: Microsoft Edge 浏览器扩展  \n**技术标准**: Manifest V3  \n**核心价值**: 智能文本处理与搜索工具  \n\n---\n\n## 🔧 必须实现的核心功能\n\n### 1. 基础交互系统\n- **快捷键触发**: `Alt+L` 弹出悬浮搜索框\n- **持久显示**: 悬浮框不会因点击页面空白而消失\n- **双重启动**: 支持悬浮框和侧边栏两种启动方式\n- **关闭方式**: 再次按 `Alt+L` 或点击关闭按钮消失\n\n### 2. 搜索引擎系统\n- **默认引擎**: 必应 (Bing)\n- **预设引擎**: 秘塔、搜狗、谷歌、谷歌学术\n- **自定义支持**: 用户可添加自定义搜索引擎\n- **智能跳转**: 输入纯链接时自动跳转\n- **历史记录**: 保存可配置数量的搜索历史\n\n### 3. 数据存储系统\n- **配置存储**: 使用 chrome.storage.local API\n- **导入导出**: 支持配置文件的导入和导出\n- **历史管理**: 可设置保存的历史记录数量限制\n\n---\n\n## 🎛️ 功能开关详细规格\n\n### 开关1: 提取和拆解功能\n\n#### A. 文本清洗处理\n**处理顺序**:\n1. 提取所有链接并单独显示\n2. 去除所有中文字符\n3. 去除中文标点符号（保留\"。\"）\n4. 将中文句号\"。\"替换为英文句号\".\"\n5. 去除方括号\"[]\"及其内容\n6. 去除所有非URL字符\n7. 规范化空格\n\n#### B. 文本拆分功能\n**拆分选项**:\n- 拆分逻辑学习微信输入法对剪贴板的处理可以多选\n- 按空格拆分\n- 按数字拆分  (注：在最终实现中，此项与按空格合并处理)\n- 按标点符号拆分\n- 按分行拆分\n- 按中文句子拆分\n- 按英文句子拆分（默认选项）\n\n**可视化显示**:\n- 拆分后的文本用小方框包围\n- 一排显示多个，按窗口宽度自动换行\n- 每排前面显示方框和行号\n- 支持单个词条点击选择/取消\n- 支持整行勾选功能\n- 支持全选功能\n\n**复制控制选项**:\n- 分隔符选择: 空格/换行符/制表符\n- 是否包含标点符号 (注：在清洗后已无标点，此选项在最终实现中简化)\n- 是否全选所有词条\n- 点击\"刷新拆分\"重新按要求排列\n- **新增分隔符优先级逻辑**: 换行符 > 制表符 > 空格。如果同时勾选多个，只使用最高优先级的一个。\n\n#### C. 路径处理功能\n**输入格式支持**:\n- 带引号: `\"D:\\Users\\Jliu Pureey\\Downloads\\gitmine\\Edge-Homepage\\README.md\"`\n- 不带引号: `D:\\Users\\Jliu Pureey\\Downloads\\gitmine\\Edge-Homepage\\README.md`\n\n**必须输出的四种格式**:\n1. `D:\\Users\\Jliu Pureey\\Downloads\\gitmine\\Edge-Homepage\\README.md`\n2. `file:///D:/Users/Jliu%20Pureey/Downloads/gitmine/Edge-Homepage/README.md`\n3. `D:\\\\Users\\\\Jliu Pureey\\\\Downloads\\\\gitmine\\\\Edge-Homepage\\\\README.md`\n4. `file://D:\\Users\\Jliu Pureey\\Downloads\\gitmine\\Edge-Homepage\\README.md`\n\n**复制功能要求**:\n- 每种格式左侧有对应的复制按钮\n- 顶部选项: 是否用英语引号`\"\"`包裹复制内容\n- 保持输出顺序不变\n\n### 开关2: 链接生成功能\n\n#### A. 输入格式识别\n**仓库格式**: `username/repository`\n- 示例: `SantaChains/note`\n\n**完整链接格式**:\n- `https://github.com/username/repo`\n- `https://zread.ai/username/repo`\n- `https://context7.com/username/repo`\n- `https://deepwiki.com/username/repo`\n\n#### B. 链接生成规则\n**类似输入 `SantaChains/note` 时必须生成**:\n- `https://github.com/SantaChains/note`\n- `https://zread.ai/SantaChains/note`\n- `https://deepwiki.com/SantaChains/note`\n- `https://context7.com/SantaChains/note`\n\n#### C. 反向解析功能\n- 输入任一平台的完整链接时\n- 自动提取命名空间和仓库名\n- 生成其他平台的对应完整链接\n\n---\n\n## 🚀 升级功能要求\n\n### 1. 界面本地化\n- **完全中文化**: 所有界面元素和提示文本使用简体中文\n- **用户友好**: 符合中文用户的使用习惯\n\n### 2. 多格式同步分析\n- **同时处理**: 一次输入可以同时采用多种分析方式\n- **统一显示**: 在一个界面中展示所有检测到的格式结果\n- **智能识别**: 自动判断文本类型并应用相应处理\n\n### 3. 剪贴板监听功能\n- **参考标准**: 学习微信输入法的剪贴板处理方式\n- **自动检测**: 实时监听剪贴板内容变化\n- **智能分析**: 自动对剪贴板内容进行格式分析\n- **开关控制**: 用户可以启用/禁用此功能\n\n### 4. 界面优化\n- **侧边栏优化**: 改善侧边栏界面显示效果\n- **自动调整**: 支持界面根据内容自动调整大小\n- **响应式设计**: 适配不同窗口尺寸\n\n---\n\n## 🎨 用户体验标准\n\n### 1. 交互行为\n- **常驻选项框**: 功能激活时显示的选项框，点击空白非输入框范围不会消失\n- **即时反馈**: 所有操作都要有立即的视觉反馈\n- **状态指示**: 清晰显示当前功能状态和开关状态\n\n### 2. 视觉设计\n- **现代化界面**: 简洁美观的用户界面\n- **一致性**: 统一的视觉风格和交互模式\n- **可读性**: 良好的文字对比度和字体选择\n\n### 3. 性能要求\n- **响应速度**: 文本处理必须在100ms内完成\n- **稳定性**: 长时间使用不出现卡顿或崩溃\n- **内存控制**: 合理的内存占用，不影响浏览器性能\n\n---\n\n## 🔒 技术实现约束\n\n### 1. 浏览器限制\n- **文件系统**: 无法直接读写本地文件，使用chrome.storage.local替代\n- **权限管理**: 申请最小必要权限\n- **安全策略**: 遵守浏览器内容安全策略\n\n### 2. Manifest V3 要求\n- **Service Worker**: 使用Service Worker替代Background Page\n- **权限声明**: 在manifest.json中明确声明所需权限\n- **API使用**: 使用Manifest V3兼容的API\n\n### 3. 兼容性要求\n- **浏览器版本**: Microsoft Edge 88+\n- **屏幕适配**: 支持不同分辨率和窗口大小\n- **系统兼容**: Windows系统路径处理\n\n---\n\n## ✅ 验收检查清单\n\n### 基础功能验收\n- [ ] Alt+L快捷键正常工作\n- [ ] 悬浮框不会意外消失\n- [ ] 侧边栏功能正常\n- [ ] 搜索引擎切换正常\n- [ ] 历史记录保存和显示\n- [ ] 配置导入导出功能\n\n### 开关1功能验收\n- [ ] 路径识别与四种格式生成正确\n- [ ] 链接提取功能正常\n- [ ] 文本清洗按规则执行\n- [ ] 6种拆分方式都能正常工作\n- [ ] 可视化选择功能完整\n- [ ] 复制功能和选项控制正常（含分隔符优先级）\n- [ ] 路径复制功能正常\n\n### 开关2功能验收\n- [ ] 仓库格式识别正确\n- [ ] 4个平台链接生成正确\n- [ ] 反向解析功能正常\n- [ ] 完整链接处理正确\n\n### 升级功能验收\n- [ ] 界面完全中文化\n- [ ] 多格式同步分析正常\n- [ ] 剪贴板监听功能正常\n- [ ] 界面自动调整正常\n\n### 用户体验验收\n- [ ] 所有操作有即时反馈\n- [ ] 常驻选项框行为正确\n- [ ] 界面美观且一致\n- [ ] 性能满足要求\n\n---\n\n## 📋 关键实现要点\n\n### 1. 必须严格按照的处理顺序\n1.  **文本清洗**: 链接提取 → 中文去除 → 标点处理 → 方括号去除 → 非URL字符去除 → 空格规范化\n2.  **路径转换**: 必须按指定顺序生成4种格式\n3.  **链接生成**: 必须生成指定的4个平台链接\n\n### 2. 不可遗漏的功能点\n- 每个拆分项的方框显示和行号\n- 整行选择和单个选择功能\n- 复制时的分隔符选择（实现优先级逻辑）\n- 路径复制的引号包裹选项\n- 剪贴板监听的开关控制\n\n### 3. 用户体验关键点\n- 悬浮框的持久显示特性\n- 常驻选项框的点击空白不消失\n- 所有复制操作的成功反馈\n- 界面的中文本地化\n\n---\n\n## 🎯 项目成功标准\n\n**功能完整性**: 所有原始需求和升级需求100%实现  \n**用户体验**: 操作流畅，反馈及时，界面友好  \n**技术规范**: 符合Manifest V3标准，性能良好  \n**稳定性**: 长期使用无崩溃，内存占用合理  \n\n这个项目的成功标准是：**用户的每一个具体要求都必须精确实现，不能有任何遗漏或简化**。\n\n---\n\n**文档版本**: 1.0 (升级版)\n**创建目的**: 确保项目开发完全符合用户需求\n**使用说明**: 开发过程中的标准参考，每个功能点都必须严格按照此规范实现