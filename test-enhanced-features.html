<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Search Buddy - åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        .test-result {
            background: white;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 4px solid #007bff;
        }
        .rule-item {
            margin: 5px 0;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .rule-title {
            font-weight: bold;
            color: #333;
            cursor: help;
        }
        .rule-description {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .split-item {
            display: inline-block;
            background: #e3f2fd;
            padding: 4px 8px;
            margin: 2px;
            border-radius: 4px;
            border: 1px solid #90caf9;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Enhanced Search Buddy - åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>ğŸ“ æµ‹è¯•ç”¨ä¾‹</h2>
        <p>ä»¥ä¸‹æ˜¯å„ç§å†…å®¹ç±»å‹çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç‚¹å‡»æŒ‰é’®å°†å†…å®¹å¡«å…¥æµ‹è¯•åŒºåŸŸï¼š</p>
        
        <button onclick="loadTestCase('chinese')">ä¸­æ–‡æ–‡æœ¬</button>
        <button onclick="loadTestCase('english')">è‹±æ–‡æ–‡æœ¬</button>
        <button onclick="loadTestCase('mixed')">ä¸­è‹±æ–‡æ··åˆ</button>
        <button onclick="loadTestCase('code')">ä»£ç å‘½å</button>
        <button onclick="loadTestCase('list')">åˆ—è¡¨å†…å®¹</button>
        <button onclick="loadTestCase('wrapped')">åŒ…è£¹æ ‡ç‚¹</button>
        <button onclick="loadTestCase('complex')">å¤æ‚æ··åˆ</button>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ åˆ†éš”è§„åˆ™è¯´æ˜</h2>
        <div id="rules-explanation">
            <div class="rule-item">
                <div class="rule-title" title="æ ¹æ®å†…å®¹ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„åˆ†éš”è§„åˆ™">auto (æ™ºèƒ½åˆ†æ)</div>
                <div class="rule-description">è‡ªåŠ¨æ£€æµ‹å†…å®¹ç±»å‹å¹¶åº”ç”¨æœ€é€‚åˆçš„åˆ†éš”é€»è¾‘</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="æŒ‰è‹±æ–‡å¥å·ã€æ„Ÿå¹å·ã€é—®å·åˆ†éš”ï¼Œé•¿å¥æŒ‰é€—å·è¿›ä¸€æ­¥æ‹†åˆ†">en-sentence (è‹±æ–‡å¥å­)</div>
                <div class="rule-description">æŒ‰è‹±æ–‡æ ‡ç‚¹ç¬¦å·æ‹†åˆ†å¥å­å’ŒçŸ­è¯­</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="æŒ‰ä¸­æ–‡å¥å·ã€æ„Ÿå¹å·ã€é—®å·ã€åˆ†å·åˆ†éš”ï¼Œé•¿å¥æŒ‰é€—å·ã€é¡¿å·æ‹†åˆ†">zh-sentence (ä¸­æ–‡å¥å­)</div>
                <div class="rule-description">æŒ‰ä¸­æ–‡æ ‡ç‚¹ç¬¦å·æ‹†åˆ†å¥å­å’ŒçŸ­è¯­</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="æŒ‰è¯­è¨€è¾¹ç•Œåˆ†éš”ï¼Œä¸­æ–‡éƒ¨åˆ†ç”¨ä¸­æ–‡è§„åˆ™ï¼Œè‹±æ–‡éƒ¨åˆ†ç”¨è‹±æ–‡è§„åˆ™">mixed-sentence (ä¸­è‹±æ–‡æ··åˆ)</div>
                <div class="rule-description">æ™ºèƒ½å¤„ç†ä¸­è‹±æ–‡æ··åˆæ–‡æœ¬</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="è¯†åˆ«é©¼å³°ã€è›‡å½¢ã€ä¸²å¼å‘½åæ³•ï¼Œæ‹†åˆ†ä¸ºåŸºç¡€è¯­ä¹‰å•å…ƒ">code-naming (ä»£ç å‘½å)</div>
                <div class="rule-description">æ‹†åˆ†å‡½æ•°åã€å˜é‡åç­‰ä»£ç æ ‡è¯†ç¬¦</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="è¯†åˆ«å„ç§åˆ—è¡¨æ ‡è®°ï¼ˆæ•°å­—ã€å­—æ¯ã€ç¬¦å·ï¼‰ï¼Œæå–åˆ—è¡¨é¡¹å†…å®¹">list-items (åˆ—è¡¨é¡¹æå–)</div>
                <div class="rule-description">æå–æœ‰åºå’Œæ— åºåˆ—è¡¨ä¸­çš„é¡¹ç›®</div>
            </div>
            <div class="rule-item">
                <div class="rule-title" title="æå–å¼•å·ã€æ‹¬å·ã€ä¹¦åå·ç­‰åŒ…è£¹ç¬¦å·å†…çš„å†…å®¹">wrapped-content (åŒ…è£¹å†…å®¹)</div>
                <div class="rule-description">æå–è¢«å„ç§æ ‡ç‚¹ç¬¦å·åŒ…è£¹çš„å†…å®¹</div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•åŒºåŸŸ</h2>
        <textarea id="test-input" class="test-input" rows="6" placeholder="åœ¨æ­¤è¾“å…¥æµ‹è¯•æ–‡æœ¬ï¼Œæˆ–ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åŠ è½½æµ‹è¯•ç”¨ä¾‹..."></textarea>
        
        <div>
            <label>
                <input type="checkbox" id="multi-rule-mode"> å¯ç”¨å¤šè§„åˆ™æ¨¡å¼
            </label>
        </div>
        
        <div id="single-rule-section">
            <label for="rule-select">é€‰æ‹©åˆ†éš”è§„åˆ™ï¼š</label>
            <select id="rule-select">
                <option value="auto">auto (æ™ºèƒ½åˆ†æ)</option>
                <option value="en-sentence">en-sentence (è‹±æ–‡å¥å­)</option>
                <option value="zh-sentence">zh-sentence (ä¸­æ–‡å¥å­)</option>
                <option value="mixed-sentence">mixed-sentence (ä¸­è‹±æ–‡æ··åˆ)</option>
                <option value="code-naming">code-naming (ä»£ç å‘½å)</option>
                <option value="list-items">list-items (åˆ—è¡¨é¡¹æå–)</option>
                <option value="wrapped-content">wrapped-content (åŒ…è£¹å†…å®¹)</option>
                <option value="space">space (ç©ºæ ¼åˆ†éš”)</option>
                <option value="newline">newline (æ¢è¡Œåˆ†éš”)</option>
                <option value="punctuation">punctuation (æ ‡ç‚¹åˆ†éš”)</option>
                <option value="word">word (å•è¯åˆ†éš”)</option>
            </select>
        </div>
        
        <div id="multi-rule-section" style="display: none;">
            <p>é€‰æ‹©å¤šä¸ªè§„åˆ™ï¼ˆæŒ‰ä¼˜å…ˆçº§é¡ºåºåº”ç”¨ï¼‰ï¼š</p>
            <div id="multi-rule-checkboxes">
                <label><input type="checkbox" value="list-items"> åˆ—è¡¨é¡¹æå–</label>
                <label><input type="checkbox" value="wrapped-content"> åŒ…è£¹å†…å®¹</label>
                <label><input type="checkbox" value="code-naming"> ä»£ç å‘½å</label>
                <label><input type="checkbox" value="mixed-sentence"> ä¸­è‹±æ–‡æ··åˆ</label>
                <label><input type="checkbox" value="zh-sentence"> ä¸­æ–‡å¥å­</label>
                <label><input type="checkbox" value="en-sentence"> è‹±æ–‡å¥å­</label>
            </div>
        </div>
        
        <button onclick="testSplit()">ğŸ”„ æ‰§è¡Œæ‹†åˆ†</button>
        <button onclick="testClassify()">ğŸ” å†…å®¹åˆ†ç±»</button>
        <button onclick="testMultiFormat()">ğŸ“Š å¤šæ ¼å¼åˆ†æ</button>
        
        <div id="test-results" class="test-result" style="display: none;">
            <h3>æ‹†åˆ†ç»“æœï¼š</h3>
            <div id="split-results"></div>
        </div>
        
        <div id="classify-results" class="test-result" style="display: none;">
            <h3>å†…å®¹åˆ†ç±»ç»“æœï¼š</h3>
            <div id="classification-info"></div>
        </div>
        
        <div id="format-results" class="test-result" style="display: none;">
            <h3>å¤šæ ¼å¼åˆ†æç»“æœï¼š</h3>
            <div id="format-info"></div>
        </div>
    </div>

    <script type="module">
        // å¯¼å…¥å¤„ç†å‡½æ•°
        import { splitText, classifyText, processMultiFormat } from './src/utils/textProcessor.js';
        
        // æµ‹è¯•ç”¨ä¾‹æ•°æ®
        const testCases = {
            chinese: 'æˆ‘ä»Šå¤©å»äº†åŒ—äº¬å¤§å­¦ï¼Œå‚è§‚äº†å›¾ä¹¦é¦†å’Œå®éªŒå®¤ã€‚å¤©æ°”å¾ˆå¥½ï¼Œå¿ƒæƒ…ä¹Ÿä¸é”™ï¼ä½ è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ',
            english: 'I visited the library today. It was amazing! The books were well organized, and the staff was helpful. Would you like to go there?',
            mixed: 'æˆ‘å–œæ¬¢ä½¿ç”¨JavaScriptç¼–ç¨‹ï¼Œç‰¹åˆ«æ˜¯Reactæ¡†æ¶ã€‚GitHubä¸Šæœ‰å¾ˆå¤šopen sourceé¡¹ç›®å€¼å¾—å­¦ä¹ ã€‚',
            code: 'getUserInfo updateUserProfile handleSubmitButton user_name order_id create-component func(param1, param2)',
            list: '1. å­¦ä¹ JavaScript\n2. æŒæ¡Reactæ¡†æ¶\n3. äº†è§£Node.js\nâ€¢ å‰ç«¯å¼€å‘\nâ€¢ åç«¯å¼€å‘\n- æ•°æ®åº“è®¾è®¡',
            wrapped: 'ä»–è¯´ï¼š"ä»Šå¤©å¤©æ°”çœŸå¥½ï¼"ç„¶ååˆè¡¥å……é“ï¼š"æˆ‘ä»¬å»å…¬å›­èµ°èµ°å§ã€‚"ï¼ˆè¿™æ˜¯ä¸ªå¥½ä¸»æ„ï¼‰',
            complex: '1. è°ƒç”¨getUserInfo()å‡½æ•°ï¼›2. å¤„ç†"ç”¨æˆ·æ•°æ®"ï¼›3. æ›´æ–°user_profileè¡¨ï¼›ç»“æœï¼š(success)'
        };
        
        // å…¨å±€å‡½æ•°
        window.loadTestCase = function(type) {
            document.getElementById('test-input').value = testCases[type] || '';
        };
        
        window.testSplit = function() {
            const text = document.getElementById('test-input').value.trim();
            if (!text) {
                alert('è¯·è¾“å…¥æµ‹è¯•æ–‡æœ¬');
                return;
            }
            
            let rules;
            const multiRuleMode = document.getElementById('multi-rule-mode').checked;
            
            if (multiRuleMode) {
                const checkboxes = document.querySelectorAll('#multi-rule-checkboxes input:checked');
                rules = Array.from(checkboxes).map(cb => cb.value);
                if (rules.length === 0) {
                    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè§„åˆ™');
                    return;
                }
            } else {
                rules = document.getElementById('rule-select').value;
            }
            
            try {
                const results = splitText(text, rules);
                displaySplitResults(results, rules);
            } catch (error) {
                console.error('æ‹†åˆ†å¤±è´¥:', error);
                alert('æ‹†åˆ†å¤±è´¥: ' + error.message);
            }
        };
        
        window.testClassify = function() {
            const text = document.getElementById('test-input').value.trim();
            if (!text) {
                alert('è¯·è¾“å…¥æµ‹è¯•æ–‡æœ¬');
                return;
            }
            
            try {
                const classification = classifyText(text);
                displayClassificationResults(classification);
            } catch (error) {
                console.error('åˆ†ç±»å¤±è´¥:', error);
                alert('åˆ†ç±»å¤±è´¥: ' + error.message);
            }
        };
        
        window.testMultiFormat = function() {
            const text = document.getElementById('test-input').value.trim();
            if (!text) {
                alert('è¯·è¾“å…¥æµ‹è¯•æ–‡æœ¬');
                return;
            }
            
            try {
                const formats = processMultiFormat(text);
                displayFormatResults(formats);
            } catch (error) {
                console.error('æ ¼å¼åˆ†æå¤±è´¥:', error);
                alert('æ ¼å¼åˆ†æå¤±è´¥: ' + error.message);
            }
        };
        
        function displaySplitResults(results, rules) {
            const container = document.getElementById('split-results');
            const rulesText = Array.isArray(rules) ? rules.join(' + ') : rules;
            
            container.innerHTML = `
                <p><strong>ä½¿ç”¨è§„åˆ™:</strong> ${rulesText}</p>
                <p><strong>æ‹†åˆ†æ•°é‡:</strong> ${results.length} é¡¹</p>
                <div class="split-items">
                    ${results.map((item, index) => 
                        `<span class="split-item" title="ç¬¬${index + 1}é¡¹">${item}</span>`
                    ).join('')}
                </div>
            `;
            
            document.getElementById('test-results').style.display = 'block';
        }
        
        function displayClassificationResults(classification) {
            const container = document.getElementById('classification-info');
            
            container.innerHTML = `
                <p><strong>å†…å®¹ç±»å‹:</strong> ${classification.type}</p>
                <p><strong>ç½®ä¿¡åº¦:</strong> ${(classification.confidence * 100).toFixed(1)}%</p>
                <p><strong>å»ºè®®:</strong></p>
                <ul>
                    ${classification.suggestions.map(suggestion => 
                        `<li>${suggestion}</li>`
                    ).join('')}
                </ul>
            `;
            
            document.getElementById('classify-results').style.display = 'block';
        }
        
        function displayFormatResults(formats) {
            const container = document.getElementById('format-info');
            
            let html = '';
            for (const [key, value] of Object.entries(formats)) {
                if (Array.isArray(value) && value.length > 0) {
                    html += `
                        <div>
                            <strong>${key}:</strong>
                            <ul>
                                ${value.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            }
            
            if (!html) {
                html = '<p>æœªæ£€æµ‹åˆ°ç‰¹æ®Šæ ¼å¼å†…å®¹</p>';
            }
            
            container.innerHTML = html;
            document.getElementById('format-results').style.display = 'block';
        }
        
        // å¤šè§„åˆ™æ¨¡å¼åˆ‡æ¢
        document.getElementById('multi-rule-mode').addEventListener('change', function() {
            const singleSection = document.getElementById('single-rule-section');
            const multiSection = document.getElementById('multi-rule-section');
            
            if (this.checked) {
                singleSection.style.display = 'none';
                multiSection.style.display = 'block';
            } else {
                singleSection.style.display = 'block';
                multiSection.style.display = 'none';
            }
        });
    </script>
</body>
</html>