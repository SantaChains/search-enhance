## 设计理念初稿

组合选项是处理的原始文本,不会对基础模式的结果处理.分析功能是对原始文本的不同处理方式,是互斥的.
分析功能对应的逻辑要写在注释中.分析模式改为

- 智能分析
  (默认启用)将英文单词分格,中文整句分格,连着的数字一格,去除空格.每个标点占一格,
- 中文分析
  中英分离,空格,整句,符号分离.符号空格留在上字词尾,数字分格.剩余中文先查找字典,在调用算法.(查找字典和调用算法有开关)
  两种不启用时,每个字符拆成单字
- 英文分析
  中英分离,空格,符号,整句分离.符号空格留在上字词尾,数字分格.英文单词如果是类似命名 如"DarkSoul","dark_soul","dark-soul"都分成"dark" "soul".但是"DARKSOUL"大写字母连续的不拆
  DarkSOUL处理成Dark SOUL,HTTPSConnection处理成HTTPSConnection,XMLHttpRequest为XMLHttp Request.
- 代码分析
  (不调用分出每一行的splitText函数,防止函数体不完整)主要考虑cpp和Python即可
  代码分析,不带调用splitText函数.对python先可以按行分离,然后相同缩进的临行组合在一起,.含{}符号的就当cpp:没"{"符号的就按行分.如果有{就找最近的},组合成新的一行.不管成不成对
  分为整句(宏整句如cpp的define,引入(improt ,#include)整句,定义或声明),函数体(成对符号()""{}[]''``<>.分成最大成对,内部不拆)
  **Python代码分析 - 缩进栈算法**

1. 维护缩进栈：记录每一层的缩进空格数
2. 行分类：
   - 空行：跳过或作为分隔标记
   - 缩进增加：推入新栈层，开启新代码块
   - 缩进不变：延续当前代码块
   - 缩进减少：弹出栈层直到匹配，归属于匹配的父级块
3. 组合规则：同一栈层内的连续行组合为逻辑块
4. 函数体识别：包含 `:` 的行作为块头，后续同栈层行为体
   与C++区分逻辑：
   **代码类型检测**
   if (text.includes('{') || text.includes('}')) {
   mode = 'cpp_brace'; // 使用成对符号匹配
   } else if (lines.some(line => line.trim().endsWith(':'))) {
   mode = 'python_indent'; // 使用缩进栈算法
   } else {
   mode = 'line_based'; // 退化为整句分析.刷新生成 .
   }

- 字符断行
  按设定的行字符数,直接按字符硬断行
- AI分析
  分析出链接先输出,疑似链接补全再输出.剩下的严格分词
  ai分析链接片段排在前面,根据上下文智能推断,Visit example.com or example.org两个都补全.修正逻辑：
  **AI分析处理流水线**

1. 链接识别阶段：提取所有URL模式（http://, https://, ftp://等）
2. 疑似链接识别：域名模式（example.com, example.org等）
3. 上下文补全阶段：根据最近完整链接的协议头补全疑似链接
4. 文本重组阶段：将原文本中的链接位置替换为占位符
5. 严格分词阶段：对非链接文本进行标准分词
6. 输出排序：链接片段（按出现顺序）→ 补全链接 → 分词结果
   边界处理：如果无上下文链接，example.org 默认补全为 https://example.org.修正逻辑：

- 整句分析
  将文本拆成句子,再去除空格,中间不在分词.
- 去除符号
  先按符号分格,再去除符号,在按整句,空格,换行分离.再中,英,数字分离
- 随机分词
  将所有字符随机分成1-10的字符串.从头到尾跑出来,支持刷新重跑,结果不一样
  随机分词的结果不需要保存到历史栈.不可回溯.
  多规则组合模仿多格式分析功能设计
  提供下列选项,用户可以任意点击按钮,但是按一次就是处理一次.可以重复返回上一次结果.输出的面板仍然是分词面板
  可以重复返回上一次结果最多6次(你考虑合适的值,处理文本越大,返回次数越少)
  选项,一行两个有
  符号分词(符号放在上词尾,除非是成对的符号的前一个)
  空格,换行分词(放前一词词尾)
  中英分词(分离中文和英文)
  大写分词(将每个大写分开)
  命名分词(各类命名法分格)
  数字分词(数字单独分出来)
  去除空格
  去除符号
  去除中文
  去除英文
  引入互斥组和依赖关系."去除符号" + "符号分词"文本保持在去除符号,相当于此时不操作.启用"去除中文" + "去除英文" + "去除数字".你只管运行和错误处理,不管操作结果怎样.大写分词是再将每个大写字母分成一格与命名分词不同
  功能的对应的逻辑要写在注释中

设置是全局持久化.选项要新增功能,中文分词是否启用词典,是否启用算法,ai的配置界面,混沌分词分词数设定,随机分词的字符数区间,命名分格是否去除符号(默认去除符号,不去符号多分出一格),
