<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰©å±•è°ƒè¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .debug-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .test-data {
            background: #fff;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            margin: 10px 0;
            cursor: pointer;
            border: 1px solid #eee;
        }
        .test-data:hover {
            background: #f0f0f0;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .checklist li:before {
            content: "âŒ ";
            color: #dc3545;
        }
        .checklist li.done:before {
            content: "âœ… ";
            color: #28a745;
        }
        .console-output {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Enhance Search Buddy è°ƒè¯•é¡µé¢</h1>
    
    <div class="debug-section">
        <h2>ğŸ“‹ å®‰è£…æ£€æŸ¥æ¸…å•</h2>
        <ul class="checklist">
            <li id="check-extension">æ‰©å±•å·²åŠ è½½åˆ°æµè§ˆå™¨</li>
            <li id="check-permissions">æƒé™å·²æˆäºˆ</li>
            <li id="check-popup">å¼¹çª—å¯ä»¥æ‰“å¼€</li>
            <li id="check-sidepanel">ä¾§è¾¹æ å¯ä»¥æ‰“å¼€</li>
            <li id="check-hotkey">Alt+L å¿«æ·é”®å·¥ä½œ</li>
            <li id="check-clipboard">å‰ªè´´æ¿æƒé™å¯ç”¨</li>
        </ul>
    </div>

    <div class="debug-section">
        <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•æ•°æ®</h2>
        <p>ç‚¹å‡»ä¸‹é¢çš„æµ‹è¯•æ•°æ®å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç„¶ååœ¨æ‰©å±•ä¸­æµ‹è¯•ï¼š</p>
        
        <h3>è·¯å¾„æµ‹è¯•</h3>
        <div class="test-data" data-test="path1">D:\Users\Jliu Pureey\Downloads\gitmine\enhance-search-buddy\README.md</div>
        <div class="test-data" data-test="path2">"C:\Program Files\Microsoft Office\Office16\WINWORD.EXE"</div>
        <div class="test-data" data-test="path3">C:\Windows\System32\notepad.exe</div>

        <h3>ä»“åº“æµ‹è¯•</h3>
        <div class="test-data" data-test="repo1">microsoft/vscode</div>
        <div class="test-data" data-test="repo2">facebook/react</div>
        <div class="test-data" data-test="repo3">https://github.com/openai/gpt-4</div>

        <h3>URLæµ‹è¯•</h3>
        <div class="test-data" data-test="url1">https://www.example.com</div>
        <div class="test-data" data-test="url2">https://github.com/microsoft/vscode/issues/123</div>
        <div class="test-data" data-test="url3">https://zread.ai/openai/chatgpt</div>

        <h3>æ··åˆå†…å®¹æµ‹è¯•</h3>
        <div class="test-data" data-test="mixed1">è¿™æ˜¯ä¸€æ®µåŒ…å«é“¾æ¥ https://www.example.com å’Œè·¯å¾„ D:\test\file.txt çš„æ··åˆæ–‡æœ¬ï¼Œè¿˜æœ‰ä»“åº“ user/repo ç­‰å†…å®¹ã€‚</div>
        <div class="test-data" data-test="mixed2">é¡¹ç›®è·¯å¾„ï¼šC:\Projects\MyApp\src\main.jsï¼Œä»“åº“åœ°å€ï¼šhttps://github.com/myuser/myappï¼Œè”ç³»é‚®ç®±ï¼štest@example.com</div>

        <h3>æ–‡æœ¬æ‹†åˆ†æµ‹è¯•</h3>
        <div class="test-data" data-test="split1">Hello world! This is a test sentence. è¿™æ˜¯ä¸­æ–‡æµ‹è¯•ã€‚åŒ…å«æ•°å­—123å’Œæ ‡ç‚¹ç¬¦å·ã€‚</div>
        <div class="test-data" data-test="split2">apple,banana,cherry;orange:grape|watermelon</div>
    </div>

    <div class="debug-section">
        <h2>ğŸš€ å¿«é€Ÿæµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li><strong>åŠ è½½æ‰©å±•</strong>ï¼šæ‰“å¼€ <code>edge://extensions/</code>ï¼Œå¼€å¯å¼€å‘è€…æ¨¡å¼ï¼ŒåŠ è½½è§£å‹ç¼©çš„æ‰©å±•</li>
            <li><strong>æµ‹è¯•å¼¹çª—</strong>ï¼šç‚¹å‡»æ‰©å±•å›¾æ ‡ï¼Œæ£€æŸ¥å¼¹çª—æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</li>
            <li><strong>æµ‹è¯•å¿«æ·é”®</strong>ï¼šæŒ‰ <kbd>Alt+L</kbd>ï¼Œæ£€æŸ¥æ‚¬æµ®çª—æ˜¯å¦å‡ºç°</li>
            <li><strong>æµ‹è¯•ä¾§è¾¹æ </strong>ï¼šå³é”®æ‰©å±•å›¾æ ‡ï¼Œé€‰æ‹©åœ¨ä¾§è¾¹æ ä¸­æ‰“å¼€</li>
            <li><strong>æµ‹è¯•åŠŸèƒ½</strong>ï¼šå¤åˆ¶ä¸Šé¢çš„æµ‹è¯•æ•°æ®ï¼Œåœ¨æ‰©å±•ä¸­æµ‹è¯•å„ç§åŠŸèƒ½</li>
        </ol>
    </div>

    <div class="debug-section">
        <h2>ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥</h2>
        <div class="status error">
            <strong>æ‰©å±•æ— æ³•åŠ è½½</strong><br>
            æ£€æŸ¥ manifest.json è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œæ‰€æœ‰æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
        </div>
        <div class="status error">
            <strong>å¼¹çª—ç©ºç™½</strong><br>
            æ‰“å¼€å¼€å‘è€…å·¥å…·æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ï¼Œå¯èƒ½æ˜¯ JavaScript è¯­æ³•é”™è¯¯
        </div>
        <div class="status error">
            <strong>å¿«æ·é”®ä¸å·¥ä½œ</strong><br>
            æ£€æŸ¥æ˜¯å¦ä¸å…¶ä»–æ‰©å±•æˆ–ç³»ç»Ÿå¿«æ·é”®å†²çª
        </div>
        <div class="status error">
            <strong>å‰ªè´´æ¿åŠŸèƒ½ä¸å·¥ä½œ</strong><br>
            æ£€æŸ¥æ˜¯å¦æˆäºˆäº†å‰ªè´´æ¿è¯»å–æƒé™
        </div>
    </div>

    <div class="debug-section">
        <h2>ğŸ“Š æ§åˆ¶å°è¾“å‡º</h2>
        <div class="console-output" id="console-output">
            ç­‰å¾…æµ‹è¯•ç»“æœ...
        </div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®ç‚¹å‡»å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('.test-data').forEach(element => {
            element.addEventListener('click', async () => {
                const text = element.textContent.trim();
                try {
                    await navigator.clipboard.writeText(text);
                    element.style.background = '#d4edda';
                    element.style.color = '#155724';
                    setTimeout(() => {
                        element.style.background = '#fff';
                        element.style.color = '';
                    }, 1000);
                    logToConsole(`âœ… å·²å¤åˆ¶: ${text.substring(0, 50)}...`);
                } catch (err) {
                    logToConsole(`âŒ å¤åˆ¶å¤±è´¥: ${err.message}`);
                }
            });
        });

        // æ§åˆ¶å°æ—¥å¿—åŠŸèƒ½
        function logToConsole(message) {
            const output = document.getElementById('console-output');
            const time = new Date().toLocaleTimeString();
            output.innerHTML += `[${time}] ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }

        // æ£€æŸ¥æ‰©å±•çŠ¶æ€
        function checkExtensionStatus() {
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                document.getElementById('check-extension').classList.add('done');
                logToConsole('âœ… Chrome æ‰©å±• API å¯ç”¨');
            } else {
                logToConsole('âŒ Chrome æ‰©å±• API ä¸å¯ç”¨');
            }

            // æ£€æŸ¥å‰ªè´´æ¿æƒé™
            navigator.permissions.query({name: 'clipboard-read'}).then(result => {
                if (result.state === 'granted') {
                    document.getElementById('check-clipboard').classList.add('done');
                    logToConsole('âœ… å‰ªè´´æ¿è¯»å–æƒé™å·²æˆäºˆ');
                } else {
                    logToConsole(`âš ï¸ å‰ªè´´æ¿æƒé™çŠ¶æ€: ${result.state}`);
                }
            }).catch(err => {
                logToConsole(`âŒ æ— æ³•æ£€æŸ¥å‰ªè´´æ¿æƒé™: ${err.message}`);
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæ£€æŸ¥
        document.addEventListener('DOMContentLoaded', () => {
            logToConsole('ğŸš€ è°ƒè¯•é¡µé¢å·²åŠ è½½');
            checkExtensionStatus();
        });

        // ç›‘å¬é”®ç›˜äº‹ä»¶æµ‹è¯•å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.altKey && e.key === 'l') {
                logToConsole('ğŸ¯ æ£€æµ‹åˆ° Alt+L æŒ‰é”®');
            }
        });
    </script>
</body>
</html>