# 🚀 安装指南 - Enhance Search Buddy

## 📋 系统要求

### 浏览器兼容性
- **Microsoft Edge** (Chromium 内核) 88+ ✅ **推荐**
- **Google Chrome** 88+ ✅ 理论兼容
- **其他 Chromium 浏览器** ⚠️ 未测试

### 操作系统支持
- **Windows 10/11** ✅ 完全支持
- **macOS** ⚠️ 基础功能支持（路径处理功能受限）
- **Linux** ⚠️ 基础功能支持（路径处理功能受限）

### 硬件要求
- **内存**: 最低 4GB RAM
- **存储**: 约 5MB 可用空间
- **网络**: 仅搜索功能需要网络连接

## 🛠️ 安装步骤

### 方法一：开发者模式安装（推荐）

#### 1. 准备工作
```bash
# 确保项目文件完整
enhance-search-buddy/
├── manifest.json          ✅ 必需
├── src/                   ✅ 必需
├── icons/                 ✅ 必需
└── README.md              📖 说明文档
```

#### 2. 开启开发者模式
1. 打开 **Microsoft Edge** 浏览器
2. 在地址栏输入 `edge://extensions/` 并按回车
3. 在页面右上角找到 **"开发人员模式"** 开关
4. 点击开关，确保显示为 **"开"** 状态

#### 3. 加载扩展
1. 点击 **"加载解压缩的扩展"** 按钮
2. 在文件选择对话框中，导航到项目根目录
3. 选择包含 `manifest.json` 的文件夹
4. 点击 **"选择文件夹"** 完成安装

#### 4. 验证安装
安装成功后，您应该看到：
- ✅ 扩展列表中出现 "Enhance Search Buddy"
- ✅ 浏览器工具栏显示扩展图标 🔍
- ✅ 扩展状态显示为 "已启用"

### 方法二：打包安装

#### 1. 创建扩展包
1. 在 `edge://extensions/` 页面点击 **"打包扩展"**
2. 选择项目根目录作为 **"扩展根目录"**
3. 私钥文件留空（首次打包）
4. 点击 **"打包扩展"** 生成 `.crx` 文件

#### 2. 安装扩展包
1. 将生成的 `.crx` 文件拖拽到 `edge://extensions/` 页面
2. 在弹出的确认对话框中点击 **"添加扩展"**
3. 等待安装完成

## ✅ 功能验证

### 基础功能测试
1. **悬浮窗测试**
   - 按 `Alt+L` 快捷键
   - 应该在页面右上角出现悬浮搜索框
   - 再次按 `Alt+L` 应该关闭悬浮框

2. **弹窗测试**
   - 点击浏览器工具栏的扩展图标
   - 应该打开弹窗界面
   - 界面应该显示搜索框和功能开关

3. **侧边栏测试**
   - 右键点击扩展图标
   - 选择 **"在侧边栏中打开"**
   - 应该在浏览器左侧打开侧边栏

### 核心功能测试
1. **路径处理测试**
   ```
   输入: D:\Users\Test\file.txt
   开启: 提取和拆解功能
   预期: 显示4种路径格式
   ```

2. **链接生成测试**
   ```
   输入: microsoft/vscode
   开启: 链接生成功能
   预期: 生成4个平台链接
   ```

3. **剪贴板监控测试**
   ```
   操作: 开启剪贴板监控
   复制: 任意文本到剪贴板
   预期: 自动填入搜索框
   ```

## 🔐 权限说明

### 必需权限
| 权限名称 | 用途说明 | 是否可选 |
|---------|---------|---------|
| `storage` | 保存用户配置和历史记录 | ❌ 必需 |
| `sidePanel` | 支持侧边栏功能 | ❌ 必需 |
| `activeTab` | 在当前页面注入悬浮窗 | ❌ 必需 |
| `scripting` | 执行内容脚本 | ❌ 必需 |
| `contextMenus` | 右键菜单功能 | ❌ 必需 |
| `clipboardRead` | 读取剪贴板内容 | ✅ 可选 |

### 权限授予
- **自动授予**: 安装时自动获得必需权限
- **手动授予**: 剪贴板权限需要用户手动确认
- **权限管理**: 可在 `edge://extensions/` 中管理权限

## 🔧 配置选项

### 初次使用设置
1. **搜索引擎配置**
   - 默认搜索引擎：Bing
   - 可添加自定义搜索引擎
   - 支持设置默认引擎

2. **历史记录设置**
   - 默认保存50条历史记录
   - 可调整保存数量（1-1000）
   - 支持清空历史记录

3. **剪贴板监控**
   - 默认状态：启用
   - 可随时开启/关闭
   - 监控间隔：1秒

### 高级配置
1. **配置导出**
   ```javascript
   // 导出的配置文件格式
   {
     "searchEngines": [...],
     "history": [...],
     "historyLimit": 50,
     "defaultEngine": "Bing"
   }
   ```

2. **配置导入**
   - 支持 JSON 格式配置文件
   - 自动验证配置有效性
   - 导入前会备份当前配置

## 🐛 故障排除

### 常见问题及解决方案

#### 1. 扩展无法加载
**症状**: 点击"加载解压缩的扩展"后无反应或报错

**解决方案**:
```bash
# 检查文件结构
✅ 确认 manifest.json 存在且格式正确
✅ 确认 src/ 目录完整
✅ 确认 icons/ 目录存在
✅ 检查文件权限（Windows: 确保非只读）
```

**调试步骤**:
1. 打开 `edge://extensions/`
2. 点击扩展的 **"详细信息"**
3. 查看 **"错误"** 选项卡
4. 根据错误信息修复问题

#### 2. 快捷键不工作
**症状**: 按 `Alt+L` 无反应

**解决方案**:
1. 检查快捷键冲突
   - 访问 `edge://extensions/shortcuts`
   - 查看是否与其他扩展冲突
   - 重新设置快捷键

2. 检查页面兼容性
   - 某些特殊页面（如 `edge://` 页面）不支持内容脚本
   - 尝试在普通网页上使用

#### 3. 剪贴板功能异常
**症状**: 剪贴板监控不工作或报错

**解决方案**:
1. **权限检查**
   ```javascript
   // 在控制台检查权限
   navigator.permissions.query({name: 'clipboard-read'})
     .then(result => console.log(result.state));
   ```

2. **浏览器版本**
   - 确保 Edge 版本 ≥ 88
   - 更新到最新版本

3. **HTTPS 要求**
   - 剪贴板 API 需要安全上下文
   - 扩展页面自动满足此要求

#### 4. 悬浮窗显示异常
**症状**: 悬浮窗位置错误或样式异常

**解决方案**:
1. **样式冲突**
   - 某些网站 CSS 可能影响悬浮窗
   - 悬浮窗使用 iframe 隔离，理论上不受影响

2. **屏幕适配**
   - 检查屏幕分辨率和缩放设置
   - 悬浮窗会自动适配屏幕尺寸

#### 5. 性能问题
**症状**: 扩展运行缓慢或占用内存过高

**解决方案**:
1. **清理数据**
   - 清空历史记录
   - 重置配置到默认值

2. **重启扩展**
   - 在扩展管理页面点击 **"重新加载"**
   - 或禁用后重新启用

### 调试工具

#### 1. 内置调试页面
访问扩展目录中的 `debug.html`（如果存在）进行功能测试

#### 2. 浏览器开发者工具
```javascript
// 在扩展页面按 F12 打开开发者工具
// 查看控制台错误信息
console.log('调试信息');

// 检查存储数据
chrome.storage.local.get(null, (data) => {
  console.log('存储数据:', data);
});
```

#### 3. 扩展详细信息
在 `edge://extensions/` 中点击扩展的 **"详细信息"** 查看：
- 权限列表
- 错误日志
- 活动状态
- 内存使用

## 🔄 更新方法

### 开发版本更新
1. **下载新版本**
   - 获取最新的项目文件
   - 确保文件结构完整

2. **更新扩展**
   - 方法一：在扩展管理页面点击 **"重新加载"** 按钮
   - 方法二：删除旧版本，重新加载新版本

3. **验证更新**
   - 检查版本号（在扩展详细信息中）
   - 测试新功能是否正常工作

### 配置迁移
```javascript
// 更新前导出配置
// 更新后导入配置
// 确保用户数据不丢失
```

## 🗑️ 卸载方法

### 完全卸载
1. **移除扩展**
   - 打开 `edge://extensions/`
   - 找到 "Enhance Search Buddy"
   - 点击 **"删除"** 按钮
   - 在确认对话框中点击 **"删除"**

2. **清理数据**（可选）
   ```javascript
   // 扩展数据会自动清理
   // 如需手动清理，可在卸载前导出配置
   ```

### 临时禁用
如果只是临时不使用，可以：
1. 点击扩展的 **"禁用"** 按钮
2. 需要时再点击 **"启用"** 恢复使用

## 📞 技术支持

### 自助解决
1. **查看文档**
   - README.md：项目概述
   - PROJECT_SUMMARY.md：详细功能说明
   - 本文档：安装和故障排除

2. **使用调试工具**
   - 浏览器开发者工具
   - 扩展错误日志
   - 内置调试页面

### 问题反馈
如果遇到无法解决的问题：
1. **收集信息**
   - 浏览器版本
   - 操作系统版本
   - 错误截图或日志
   - 复现步骤

2. **检查已知问题**
   - 查看本文档的故障排除部分
   - 确认是否为已知限制

## 🎯 最佳实践

### 使用建议
1. **定期备份配置**
   - 导出配置文件保存
   - 避免数据丢失

2. **合理设置历史记录**
   - 根据使用频率调整保存数量
   - 定期清理无用历史

3. **权限管理**
   - 仅授予必要权限
   - 定期检查权限使用情况

### 性能优化
1. **避免大文本处理**
   - 单次处理文本建议 < 10MB
   - 大文本可分段处理

2. **合理使用剪贴板监控**
   - 不需要时及时关闭
   - 避免不必要的性能消耗

---

## 📋 安装检查清单

安装完成后，请确认以下项目：

- [ ] ✅ 扩展图标出现在工具栏
- [ ] ✅ 按 `Alt+L` 可打开悬浮窗
- [ ] ✅ 点击图标可打开弹窗
- [ ] ✅ 右键图标可选择侧边栏
- [ ] ✅ 搜索功能正常工作
- [ ] ✅ 路径处理功能正常
- [ ] ✅ 链接生成功能正常
- [ ] ✅ 剪贴板监控可开启
- [ ] ✅ 设置页面可正常访问
- [ ] ✅ 配置导入导出功能正常

**全部确认后，安装成功！🎉**

---

**安装指南版本**: 2.1.0  
**适用扩展版本**: v2.1.0+  
**最后更新**: 2024年  
**维护状态**: ✅ 持续更新